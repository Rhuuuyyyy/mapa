{% extends "base.html" %}

{% block title %}Admin Dashboard - MAPA SaaS{% endblock %}

{% block content %}
<div class="dashboard">
    <header class="dashboard-header">
        <h1>Painel Administrativo</h1>
        <div class="header-actions">
            <span id="adminName">Carregando...</span>
            <button onclick="logout()" class="btn btn-secondary">Sair</button>
        </div>
    </header>
    
    <div class="dashboard-content">
        <div class="actions-bar">
            <button onclick="showCreateUserModal()" class="btn btn-primary">+ Novo Usuário</button>
        </div>
        
        <div class="users-table">
            <h2>Usuários Cadastrados</h2>
            <table id="usersTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>E-mail</th>
                        <th>Empresa</th>
                        <th>Admin</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <tr>
                        <td colspan="7" class="loading">Carregando usuários...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modal: Criar/Editar Usuário -->
<div id="userModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeUserModal()">&times;</span>
        <h2 id="modalTitle">Novo Usuário</h2>
        <form id="userForm">
            <input type="hidden" id="userId">
            
            <div class="form-group">
                <label for="fullName">Nome Completo *</label>
                <input type="text" id="fullName" required>
            </div>
            
            <div class="form-group">
                <label for="userEmail">E-mail *</label>
                <input type="email" id="userEmail" required>
            </div>
            
            <div class="form-group">
                <label for="companyName">Empresa</label>
                <input type="text" id="companyName">
            </div>
            
            <div class="form-group">
                <label for="userPassword">Senha *</label>
                <input type="password" id="userPassword" minlength="6">
                <small>Mínimo 6 caracteres</small>
            </div>
            
            <div class="form-group checkbox">
                <label>
                    <input type="checkbox" id="isAdmin">
                    Administrador
                </label>
            </div>
            
            <div class="form-group checkbox">
                <label>
                    <input type="checkbox" id="isActive" checked>
                    Ativo
                </label>
            </div>
            
            <div id="modalError" class="error-message" style="display: none;"></div>
            
            <div class="modal-actions">
                <button type="button" onclick="closeUserModal()" class="btn btn-secondary">Cancelar</button>
                <button type="submit" class="btn btn-primary">Salvar</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/admin.js"></script>
{% endblock %}