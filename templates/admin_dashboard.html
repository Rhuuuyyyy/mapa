{% extends "base.html" %}

{% block title %}Admin Dashboard - MAPA SaaS{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-header">
        <h2>Painel Administrativo</h2>
        <div class="user-info">
            <span id="userName"></span>
            <button onclick="logout()" class="btn btn-secondary">Sair</button>
        </div>
    </div>

    <div class="dashboard-content">
        <section class="card">
            <h3>Gerenciar Usuários</h3>

            <button onclick="showCreateUserForm()" class="btn btn-primary">+ Criar Usuário</button>

            <div id="createUserForm" class="form-container" style="display: none;">
                <h4>Novo Usuário</h4>
                <form id="newUserForm">
                    <div class="form-group">
                        <label for="newEmail">Email</label>
                        <input type="email" id="newEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="newFullName">Nome Completo</label>
                        <input type="text" id="newFullName" required>
                    </div>
                    <div class="form-group">
                        <label for="newCompanyName">Nome da Empresa (Opcional)</label>
                        <input type="text" id="newCompanyName">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">Senha (mín. 12 caracteres)</label>
                        <input type="password" id="newPassword" required minlength="12">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="newIsAdmin">
                            Administrador
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary">Criar</button>
                    <button type="button" onclick="hideCreateUserForm()" class="btn btn-secondary">Cancelar</button>
                </form>
            </div>

            <div id="usersTable" class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Email</th>
                            <th>Nome</th>
                            <th>Empresa</th>
                            <th>Admin</th>
                            <th>Ativo</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody"></tbody>
                </table>
            </div>
        </section>
    </div>
</div>

<script src="/static/js/admin.js"></script>
{% endblock %}
